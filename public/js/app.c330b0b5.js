(function(t){function e(e){for(var o,s,u=e[0],i=e[1],l=e[2],p=0,d=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var c=i;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[t._v(" "+t._s(t.username)+" "),n("NavigationBar")],1),n("router-view",{attrs:{username:t.username},on:{"user-logged-in":t.updateUser}})],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),n("router-link",{attrs:{to:"/login"}},[t._v("Zaloguj się")]),t._v(" | "),n("router-link",{attrs:{to:"/signup"}},[t._v("Zarejestruj się")]),t._v(" | "),n("router-link",{attrs:{to:"/about"}},[t._v("About")]),n("button",{on:{click:t.logOut}},[t._v("Wyloguj sie")])],1)},u=[],i=n("bf48"),l=n.n(i),c={name:"NavigationBar",methods:{logOut:function(){l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse",l.a.User.logOut().then(this.$router.push("/"))}}},p=c,d=n("2877"),m=Object(d["a"])(p,s,u,!1,null,"5e190f4c",null),f=m.exports,v={name:"app",components:{NavigationBar:f},data:function(){return{username:""}},methods:{updateUser:function(){var t=this;l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse",localStorage.removeItem("Parse/nanoblogo/currentUser");var e=setInterval((function(){var n=localStorage.getItem("Parse/nanoblogo/currentUser");null!==n&&(t.username=l.a.User.current().getUsername(),clearInterval(e))}),100);function n(){clearInterval(e)}setTimeout(n,2e3)}},created:function(){this.updateUser()}},h=v,g=Object(d["a"])(h,r,a,!1,null,null,null),b=g.exports,y=n("8c4f"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Home"}},[n("Posts",{attrs:{username:t.username}}),t._v(" } ")],1)},_=[],w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",[n("input",{attrs:{type:"text",id:"post-body"}}),n("input",{attrs:{type:"submit",value:"Dodaj post"},on:{click:t.addPost}})]),t._l(t.posts,(function(e){return n("div",{key:e.objectId,attrs:{id:"post",name:"post"}},[t._v(" Author: "+t._s(e.author)+" Post: "+t._s(e.body)+" Created at: "+t._s(e.createdAt)+" "),n("br"),t.username===e.author?n("div",[n("input",{attrs:{type:"submit",value:"Usun post",id:e.objectId},on:{click:function(n){return t.deletePost(e.objectId)}}})]):t._e()])}))],2)},j=[],O=(n("7db0"),n("d3b7"),n("b85c")),U={name:"Posts",data:function(){return{posts:[]}},props:["username"],methods:{getPosts:function(){return new Promise((function(t){l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse";var e=new l.a.Query("posts");return e.ascending("createdAt"),e.include("author"),t(e.find())}))},formatPosts:function(t){return new Promise((function(e){var n,o=[],r=Object(O["a"])(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;o.push({objectId:a.id,author:a.get("author").get("username"),body:a.get("body"),createdAt:a.get("createdAt")})}}catch(s){r.e(s)}finally{r.f()}return e(o)}))},getAndFormatPosts:function(){var t=this;return new Promise((function(e){return e(t.getPosts().then((function(e){return t.formatPosts(e)})))}))},populatePostsData:function(){var t=this;this.getAndFormatPosts().then((function(e){t.posts=e.reverse()}))},addPostToDatabase:function(t){return new Promise((function(e){l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse";var n=l.a.Object.extend("posts"),o=new n;return o.set("body",t),o.set("author",l.a.User.current()),e(o.save())}))},addPost:function(){var t=this,e=document.getElementById("post-body").value;this.addPostToDatabase(e).then((function(){t.populatePostsData()}))},deletePost:function(t){var e=this;l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse";var n=l.a.Object.extend("posts"),o=new l.a.Query(n);o.get(t).then((function(t){t.destroy().then(e.populatePostsData()),alert("Post został usunięty")}),(function(){alert("Post nie istnieje"),e.populatePostsData()}))},checkForNewPosts:function(){setInterval(this.populatePostsData,1e4)}},mounted:function(){this.populatePostsData(),this.checkForNewPosts()}},k=U,I=Object(d["a"])(k,w,j,!1,null,null,null),x=I.exports,$={name:"Home",components:{Posts:x},props:["username"]},E=$,D=Object(d["a"])(E,P,_,!1,null,null,null),L=D.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("h1",[t._v("This is an about page. Page about nanoblogo ziom")])])}],A={},B=Object(d["a"])(A,S,z,!1,null,null,null),R=B.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",[n("input",{attrs:{type:"text",id:"username"}}),n("input",{attrs:{type:"password",id:"password"}}),n("input",{attrs:{type:"submit",value:"Log in"},on:{click:t.logIn}})])])},N=[],F={name:"LogInPage",props:["username"],methods:{logIn:function(){var t=document.getElementById("username").value,e=document.getElementById("password").value;l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse";var n=new l.a.User;n.set("username",t),n.set("password",e),n.logIn().then(this.$emit("user-logged-in")).then(this.$router.push("/"))}}},H=F,M=Object(d["a"])(H,T,N,!1,null,"1671777e",null),C=M.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",[n("input",{attrs:{type:"text",id:"username"}}),n("input",{attrs:{type:"text",id:"password"}}),n("input",{attrs:{type:"submit",value:"Sign up"},on:{click:t.createUserInDatabase}})])])},Q=[],Z={name:"SignUp",methods:{createUserInDatabase:function(){var t=document.getElementById("username").value,e=document.getElementById("password").value;l.a.initialize("nanoblogo"),l.a.serverURL="https://nanoblogo.herokuapp.com/parse";var n=new l.a.User;n.set("username",t),n.set("password",e),n.signUp().then(this.$emit("user-logged-in")).then(this.$router.push("/"))}}},W=Z,q=Object(d["a"])(W,J,Q,!1,null,"633fc732",null),G=q.exports;o["a"].use(y["a"]);var K=[{path:"/",name:"Home",component:L,props:{prop:"username"}},{path:"/login",name:"LogInPage",component:C,props:{prop:"username"}},{path:"/signup",name:"SignUp",component:G},{path:"/about",name:"About",component:R}],V=new y["a"]({routes:K}),X=V;o["a"].config.productionTip=!1,new o["a"]({router:X,render:function(t){return t(b)}}).$mount("#app")}});
//# sourceMappingURL=app.c330b0b5.js.map